{% extends 'base.html' %}
{% load static %}

{% block title %}Nova Senha - Café com Pão{% endblock %}

{% block content %}
<div class="hero min-h-screen bg-base-200">
  <div class="hero-content flex-col">
    <div class="text-center">
      <h1 class="text-3xl font-bold">Definir nova senha</h1>
      <p class="py-4">Digite sua nova senha abaixo.</p>
    </div>
    
    <div class="card flex-shrink-0 w-full max-w-sm shadow-2xl bg-base-100">
      <div class="card-body">
        {% if validlink %}
          <form method="post">
            {% csrf_token %}
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Nova senha</span>
              </label>
              <input type="password" name="new_password1" class="input input-bordered" required />
              <label class="label">
                <span class="label-text-alt text-info">Minimo de 8 caracteres</span>
              </label>
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">Confirmar nova senha</span>
              </label>
              <input type="password" name="new_password2" class="input input-bordered" required />
            </div>
            
            <div class="form-control mt-6">
              <button type="submit" class="btn btn-primary">
                <i class="bi bi-check-lg"></i> Confirmar nova senha
              </button>
            </div>
          </form>
        {% else %}
          <div class="alert alert-error">
            <i class="bi bi-exclamation-triangle"></i>
            <span>O link de redefinição de senha é inválido, possivelmente porque já foi usado ou expirou.</span>
          </div>
          <div class="form-control mt-6">
            <a href="{% url 'password_reset' %}" class="btn btn-primary">
              <i class="bi bi-arrow-repeat"></i> Solicitar novo link
            </a>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</div>
{% endblock %}
